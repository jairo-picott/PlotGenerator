<!DOCTYPE html>
<html>

<head>
	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
	<div id="myDiv"></div>
	<script>
        function fetchDataAndPlot(jsonData) {
            const data = jsonData;

            const traces = data.map(item => ({
              x: item.map(point => new Date(point.last_changed)),
              y: item.map(point => point.state),
              mode: 'lines',
              name: item[0].entity_id,
            }));
  
            const layout = {
              title: 'Sensor Data',
            };
  
            Plotly.newPlot('myDiv', traces, layout);
        }
	</script>
</body>

</html>
